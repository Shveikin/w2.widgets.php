/*! For license information please see cs.min.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={"./CyberScript.js":(t,e,s)=>{s.r(e),s.d(e,{mods:()=>l});var r=s("./src/dialog/widgetdialog.js"),i=s("./src/state/widgetstate.js"),o=s("./src/c.js"),a=s("./src/widget.js"),n=s("./src/state.js"),c=s("./src/request/requeststorage.js"),d=s("./src/convertor/widgetconvertor.js");const l={state:n.state,widget:a.widget,widgetstate:i.widgetstate,c:o.c,showDialog:r.showDialog,requeststorage:c.requeststorage,widgetconvertor:d.widgetconvertor}},"./src/ancor/widgetancor.js":(t,e,s)=>{s.r(e),s.d(e,{widgetancor:()=>r});class r{static global={};static create(t,e){r.global[t]=e}static get(t,e="div"){if(t in r.global)return r.global[t]}}},"./src/c.js":(t,e,s)=>{s.r(e),s.d(e,{c:()=>a});var r=s("./src/widgetdom/widgetdom.js"),i=s("./src/widgetdom/widgetdom__api.js"),o=s("./src/convertor/widgetconvertor.js");const a=new Proxy({},{get:(t,e)=>"function"==typeof r.widgetdom[e]?r.widgetdom[e]:t=>e in i.widgetdom__api.widgetStore?i.widgetdom__api.widgetStore[e](t):o.widgetconvertor.toWidget(t,e),set:(t,e,s)=>i.widgetdom__api.widgetRegister(e,s)})},"./src/convertor/widgetconvertor.js":(t,e,s)=>{s.r(e),s.d(e,{widgetconvertor:()=>n});var r=s("./src/convertor/widgetconvertor__tools.js"),i=s("./src/statemethod/statemethod.js"),o=s("./src/watcher/widgetwatcher.js"),a=s("./src/widget.js");class n extends r.widgetconvertor__tools{static map(t,e,s){try{const[r,i]=e,[o,a]=s;return(a-o)/100*((t-r)/((i-r)/100))+o}catch(r){console.error(t,e,s,r)}}static roundValue(t,e){switch(e){case"int":return parseInt(t);case"float":return Math.round(10*t)/10;case"float2":return Math.round(100*t)/100;case"float3":return Math.round(1e3*t)/1e3}}static convert(t,e,s,r=!1){if(e==s)return t;const i=`${e}To${s}`;if(i in n){const e=n[i](t,r),o=n.getType(e);return o==s?e:n.convert(e,o,s)}throw new Error(`${i} отсутствует!`)}static methods=["StateMethod","WidgetRequest"];static getType(t){let e="Unknown";if(Array.isArray(t))e="Array";else if(t instanceof a.widget)e="Widget";else if(t instanceof i.statemethod)e="StateMethod2";else if(t instanceof o.widgetwatcher)e="Watcher";else if(t&&"object"==typeof t){if(e="Object",t instanceof HTMLElement||t instanceof Text?e="HTML":"element"in t&&(e="Element"),n.methods.includes(t.element))return t.element}else"string"==typeof t?e="String":"number"==typeof t?e="Int":"function"==typeof t?e="Function":"boolean"==typeof t&&(e="Bool");return e}static copy(t){const e=n.getType(t);switch(e){case"Widget":const s=new a.widget(t.element);return s.props=n.copy(t.props),s.templateData=n.copy(t.templateData),s;case"Array":return t.map((t=>n.copy(t)));case"Object":const r={};for(const[e,s]of Object.entries(t))r[e]=n.copy(s);return r;case"String":case"Int":case"Bool":return t;default:console.log("Не знаю как копировать этот тип",e,t)}}}},"./src/convertor/widgetconvertor__fromToFunc.js":(t,e,s)=>{s.r(e),s.d(e,{widgetconvertor__fromToFunc:()=>d});var r=s("./src/element/widgetelement.js"),i=s("./src/state/widgetstate__methods.js"),o=s("./src/widget.js"),a=s("./src/widgetdom/widgetdom.js"),n=s("./src/convertor/widgetconvertor.js");class d{static IntToWidget(t,e=!1){e=a.widgetdom.getDefaultTag(e);const s=a.widgetdom.getPropForDefaultValue(t,e);return new o.widget(e,s)}static StringToWidget(t,e=!1){e=a.widgetdom.getDefaultTag(e);const s=a.widgetdom.getPropForDefaultValue(t,e);return new o.widget(e,s)}static ArrayToWidget(t,e=!1){return e=a.widgetdom.getDefaultTag(e),new o.widget(e,{child:t})}static WatcherToWidget(t,e=!1){e=a.widgetdom.getDefaultTag(e);const s=a.widgetdom.getPropForDefaultValue(t,e);return new o.widget(e,s)}static ObjectToWidget(t,e=!1){return e=a.widgetdom.getDefaultTag(e),new o.widget(e,"object"==typeof t?t:{})}static FunctionToWidget(t,e=!1){return e=a.widgetdom.getDefaultTag(e),n.widgetconvertor.toWidget(t(),e)}static ElementToWidget(t){return r.widgetelement.make(t)}static StateMethodToWidget(t){return i.widgetstate__methods.getFromElement(t)}static StateMethodToFunction(t){const e=i.widgetstate__methods.getFromElement(t);return"Function"==n.widgetconvertor.getType(e)?e:()=>e}static BoolToWidget(t){return c.div("")}static ArrayToFunction(t){return function(){t.forEach((t=>{n.widgetconvertor.toFunction(t).apply(this)}))}}static UnknownToWidget(t){return c.div("")}static HTMLToWidget(t){return c.div({innerHTML:t})}static StringToFunction(t){return t in window?window[t]:()=>t}static BoolToFunction(t){return()=>t}static ObjectToFunction(t){return()=>t}static StateMethod2ToWidget(t){return c.div({innerText:t})}}},"./src/convertor/widgetconvertor__tools.js":(t,e,s)=>{s.r(e),s.d(e,{widgetconvertor__tools:()=>a});var r=s("./src/convertor/widgetconvertor__fromToFunc.js"),i=s("./src/convertor/widgetconvertor.js"),o=s("./src/element/widgetelement.js");class a extends r.widgetconvertor__fromToFunc{static toJSONForState(t,e,s){return"Widget"==i.widgetconvertor.getType(s)&&s.setPropsForJsonSerializeFunctions(this._path,e),JSON.stringify(s)}static toArray(t){return"Element"==i.widgetconvertor.getType(t)&&"list"==t.element?t.props.list:Array.isArray(t)?t:[t]}static toWidget(t,e=!1){const s=i.widgetconvertor.getType(t);return"Widget"==s?t:i.widgetconvertor.convert(t,s,"Widget",e)}static toElement(t,e=!1){return"Element"==i.widgetconvertor.getType(t)?t:i.widgetconvertor.convert(newelement,newtype,"Element",e)}static toFunction(t){const e=i.widgetconvertor.getType(t);return"Function"==e?t:"Element"===e?o.widgetelement.make(t):i.widgetconvertor.convert(t,e,"Function")}static arraysEqual(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(var s=0;s<t.length;++s)if(Array.isArray(t[s])){if(!Array.isArray(e[s]))return!1;if(!a.arraysEqual(t[s],e[s]))return!1}else if(!e.includes(t[s]))return!1;return!0}}},"./src/dialog/widgetdialog.js":(t,e,s)=>{s.r(e),s.d(e,{showDialog:()=>c,widgetdialog:()=>n});var r=s("./src/c.js"),i=s("./src/convertor/widgetconvertor.js"),o=s("./src/state.js"),a=s("./src/widgetdom/widgetdom.js");class n{static props={template:"template",message:"__message",title:"title",buttons:"__buttons",hidetitle:"hidetitle",width:"width",height:"height",active:"_active",active_arrow:"active_arrow",enctype:"enctype",action:"action",method:"method",onsubmit:"onsubmit"};static defaultProps={template:!1,message:"",title:"dialog",buttons:!1,hidetitle:!1,width:650,height:400,active:!1,active_arrow:!1,enctype:!1,action:!1,method:"POST",onsubmit:!1};static styles={black_h12nbsx9dk23m32ui4948382:"position:fixed;left:0;top:0;bottom:0;right:0;background:#0004;z-index:9999999999999999;overflow:auto;padding:10px;transition:all.1s;font-family:'Segoe UI', Roboto, Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue','sans-serif';",black_habsolute:"position:absolute;background:#0000;",window_h12nbsx9dk23m32ui4948382:"background:#fff;box-shadow: 5px 8px 20px 1px #00000057;color:#000;margin:12% auto;$table",dialogTitle_h12nbsx9dk23m32ui4948382:"border-radius:10px;padding:10px !important;font-weight:bold !important;font-family:Verdana, Geneva, Tahoma, sans-serif !important;color:inherit;font-size:11pt !important;",form_panel_h12nbsx9dk23m32ui4948382:"display:flex !important; color:inherit; ",_form_h12nbsx9dk23m32ui4948382:"width:100% !important;padding:10px !important;border-radius:0;",close_panel_h12nbsx9dk23m32ui4948382:"border-bottom:1px solid #0002;position:sticky !important;top:0px !important;display:flex !important;background:#ffffff30;align-items:center !important;justify-content:space-between !important;color:inherit;",buttons_panel_h12nbsx9dk23m32ui4948382:"background:rgb(177 177 177 / 19%);position:sticky !important;bottom:0px !important;display:flex !important;justify-content:flex-start !important;color:inherit;flex-direction:row-reverse;border-top:1px solid #0002;",black_h12nbsx9dk23m32ui4948382__fieldset:"padding:0 !important;margin:0 !important;border:none !important;color:inherit;",btnh12n:"display:inline-block !important;padding:2px 10px !important;background:#fff;margin:5px 0 !important;border:1px solid #0003;cursor:pointer !important;margin-right:5px !important;margin-left:5px !important;font-size:14px !important;box-shadow:none;color:inherit;"};static templates=[];static __init__(){const t=o.state.dialogstate,e=r.c.div({child:r.c.div({child:[t.watchif("hidetitle",!1,r.c.div({child:["",r.c.div({innerText:t.watch("title"),style:n.styles.dialogTitle_h12nbsx9dk23m32ui4948382}),r.c.button({innerHTML:"✖",onclick(){t.__message=!1},style:n.styles.btnh12n+"font-size: 12px !important;"})],style:n.styles.close_panel_h12nbsx9dk23m32ui4948382})),r.c.div({child:r.c.form({child:r.c.fieldset({child:t.watch("__message"),style:n.styles.black_h12nbsx9dk23m32ui4948382__fieldset}),style:t.watch("height",(t=>`${n.styles._form_h12nbsx9dk23m32ui4948382}; min-height: ${t||0}px;`)),enctype:t.watch("enctype"),action:t.watch("action"),method:t.watch("method"),onsubmit:()=>(event.preventDefault(),!1),ancor:"DialogUserForm"}),style:n.styles.form_panel_h12nbsx9dk23m32ui4948382}),r.c.div({child:["",t.watch("__buttons")],style:n.styles.buttons_panel_h12nbsx9dk23m32ui4948382})],style:t.watch("width",(t=>`max-width:${t||650}px;${n.styles.window_h12nbsx9dk23m32ui4948382}`))}),style:t.watch("__style",(t=>`${n.styles.black_h12nbsx9dk23m32ui4948382}; ${t}`)),_onmousedown(){t.__message=!1}});t.watch("__message").link((e=>{const s=0==e?"opacity: 0; visibility: hidden;":"";a.widgetdom.querySelector("body").then((e=>{t.get("__style")?e.style.overflow="auto":e.style.overflow="hidden"})),t.__style=s})),t.watch(["width","height","_active","hidetitle"]).link(((e,s,r,i)=>{let o="";e&&(o+=`width: ${e}px; `),s&&(o+=`min-height: ${i?s:s+39}px; `),r?"element"in r&&a.widgetdom.querySelector(r.element).then((e=>{const s=e.getBoundingClientRect();o+="position: absolute; margin: 0;",o+=`bottom: calc(100% - ${s.y-10}px); `,o+=`left: ${s.x}px; `,t.active_arrow="bottom",t.__position=o})):t.active_arrow=!1,t.__position=o})),r.c.render("body",e,"append")}static setup(t,e){n.templates[t]=e}static template(t){if(t)if(t in n.templates){const e=n.templates[t];for(const[t,s]of Object.entries(n.props))s in e?n.setPorp(t,e[s]):n.setPorp(t,!1)}else a.widgetdom.debug&&console.info(t," отсутствует");return n}static show(t=!0,e=!1){switch(i.widgetconvertor.getType(t)){case"String":case"Array":o.state.dialogstate.__message=t,e&&(o.state.dialogstate.title=e);break;case"Object":for(const[e,s]of Object.entries(n.defaultProps)){let r=s;const i=n.props[e];e in t&&(r=t[e]),n.setPorp(i,r)}break;case"Bool":t||(o.state.dialogstate.__message=!1)}}static setPorp(t,e){switch(t){case"__buttons":if("object"==typeof e){const s=[];for(const[t,o]of Object.entries(e))s.push(r.c.button({innerText:t,style:n.styles.btnh12n,onclick:()=>{i.widgetconvertor.toFunction(o)({close:()=>c(!1),data:r.c.ancor("DialogUserForm",(t=>new FormData(t.domElement)))})}}));o.state.dialogstate[t]=s}break;case"template":n.template(e);break;default:o.state.dialogstate[t]=e}}}function c(t,e=!1){n.show(t,e)}n.__init__()},"./src/element/widgetelement.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{widgetelement:()=>widgetelement});var _widgetdom_widgetdom_api__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/widgetdom/widgetdom__api.js"),_statemethod_statemethod__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/statemethod/statemethod.js"),_hash_h32__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/hash/__h32.js"),_convertor_widgetconvertor__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/convertor/widgetconvertor.js");class widgetelement{static tools=["group","func","requestmethod","list","requeststore_element","__h32","StateMapElement","StateMethod2","widgetcallback"];static make(t){let e=!1;return e=widgetelement.tools.includes(t.element)?widgetelement[t.element](t.props):_widgetdom_widgetdom_api__WEBPACK_IMPORTED_MODULE_0__.widgetdom__api.isReg(t.element)?_widgetdom_widgetdom_api__WEBPACK_IMPORTED_MODULE_0__.widgetdom__api.get(t.element,t.props):new widget(t.element,t.props),e}static group({list:t}){return()=>t.forEach((t=>_convertor_widgetconvertor__WEBPACK_IMPORTED_MODULE_3__.widgetconvertor.toFunction(t)()))}static func({body:t}){return new Function(t)}static list({list:t}){return t}static requeststore_element({hash:t,bind:e,then:s}){return function(){return requeststorage.run(t,e,s,this)}}static __h32({base:t,list:e,method:s=32}){return new _hash_h32__WEBPACK_IMPORTED_MODULE_2__.__h32(e).toElement(64==s?_hash_h32__WEBPACK_IMPORTED_MODULE_2__.__h32.unpack(t):t)}static StateMapElement({stateName,key,widget,props}){return state[stateName].watch(key,(function(obj){return!!Array.isArray(obj)&&obj.map(((itm,elementKey)=>{let json=widget.replaceAll("*@val@*",itm).replaceAll("*@key@*",elementKey);return Object.keys(props.keys).map((t=>{const e=props.keys[t],s=itm[t];json=json.replaceAll(e,s)})),Object.keys(props.math).map((hash=>{const calc=props.math[hash].replaceAll("@key",elementKey).replaceAll("@length",obj.length);let result="";eval(`result = ${calc}`),json=json.replaceAll(hash,result)})),_convertor_widgetconvertor__WEBPACK_IMPORTED_MODULE_3__.widgetconvertor.toWidget(JSON.parse(json))}))}))}static StateMethod2({path:t,method:e,props:s,wrapFunc:r}){return new _statemethod_statemethod__WEBPACK_IMPORTED_MODULE_1__.statemethod(t,e,s,r)}static widgetcallback({index:t,group:e}){return widgetcallback.get(t,e)}}},"./src/hash/__h32.js":(t,e,s)=>{s.r(e),s.d(e,{__h32:()=>i});var r=s("./src/convertor/widgetconvertor.js");class i{static map={"+":!0,"-":!1,q:"div",w:"element",e:"props",r:"child",t:"method",u:"stateName",i:"modelin",o:"value",p:"label",a:"args",s:"style",d:"input",f:"checked",g:"h1",h:"h2",j:"h3",k:"h4",l:"h5",z:"h6",x:"textarea",c:"span",y:"watch",v:"watchif",b:"watchin",n:"watchdefault",m:"StateMethod",qq:"type",qw:"json",qe:"button",qr:"onclick",qt:"innerText",qy:"StateMapElement",tt:"title",qu:"key"};hashItm(t){return"object"==typeof t?this.toElement(t):t in i.map?i.map[t]:this.list[t]}constructor(t){this.list=r.widgetconvertor.toArray(t)}toElement(t){if(Array.isArray(t))return t.map((t=>this.hashItm(t)));{const e={};for(const[s,r]of Object.entries(t)){const t=this.hashItm(s),i=this.hashItm(r);e[t]=i}return e}}static unpack(t){const e=t.replace(/(\w+|[+|-])/g,'"$1"');return JSON.parse(e)}}},"./src/request/requeststorage.js":(t,e,s)=>{s.r(e),s.d(e,{requeststorage:()=>i});var r=s("./src/request/widgetrequest.js");class i{static storage={};static active={};static delay=!1;static create(t){this.storage=t}static append(t){this.storage=Object.assign(this.storage,t)}static fetch(t,e,s=!1){"then"in e&&(s=e.then,delete e.then),i.run(t,e,s,this)}static run(t,e=!1,s=!1,o=!1){t in i.storage?(t in i.active?i.active[t]:new r.widgetrequest(t,i.storage[t],e,o,s)).run(i.delay):showDialog({title:"Ошибка 842",message:`Request "${t}" отсутствует!`})}static setDelay(t){i.delay=t}}},"./src/request/widgetalias.js":(t,e,s)=>{s.r(e),s.d(e,{widgetalias:()=>r});class r{static global={};static url="";static set(t,e){r.global[t]=e,r.updateHistory()}static remove(t){t in r.global&&(delete r.global[t],r.updateHistory())}static getUrl(){let t="";return Object.keys(r.global).forEach((e=>{t+="&"+e,Array.isArray(r.global[e])?t+=`=${r.global[e].join(",")}`:t+=`=${r.global[e]}`})),""!=t?t.substring(1):""}static updateHistory(){const t=r.getUrl();t!=r.url&&(window.history.replaceState(0,"",location.origin+location.pathname+"?"+t),r.url=t)}}},"./src/request/widgetrequest.js":(t,e,s)=>{s.r(e),s.d(e,{widgetrequest:()=>r});class r{static active={};constructor(t,e,s=!1,r=!1,i=!1){this.hash=t,requeststorage.active[this.hash]=this,this.url=e.url,this.source=e.source,this.method=e.method,this.useState=e.useState,this.bind=s,this.bindToHtmlElement=r,this.then=i,this.status=!1,this.current_request=!1,this.waiting=!1,this.waiting2=!1,this.loading=!1,this.block=!1,this.elementWaiting=!1,this.penaltytime=0}stopLoading(){this.loading&&(this.loading.abort(),this.loading=!1,this.addpenalty(500))}addpenalty(t){this.penaltytime<1e3&&(this.penaltytime+=t)}run(t=!1){if(this.block)return!1;this.elementWaiting||this.wait(!0),this.stopLoading(),t&&0!=this.penaltytime?(this.waiting2&&(clearTimeout(this.waiting2),this.addpenalty(150)),this.waiting&&(clearTimeout(this.waiting),this.addpenalty(100)),this.waiting=setTimeout((()=>this.run()),t+this.penaltytime)):(this.waiting=!1,this.createRequest(150))}createRequest(t=!1){this.stopLoading(),t?(this.waiting2&&(clearTimeout(this.waiting2),this.addpenalty(150)),this.waiting2=setTimeout((()=>this.createRequest()),t+this.penaltytime)):(this.waiting2=!1,this.fetch())}fetch(){const t=this.getStateData();this.current_request=Math.random();const e=JSON.stringify({state:t,executor:{source:this.source,method:this.method,props:this.props,bind:this.bind},request_id:this.current_request});fetch(this.url,{method:"POST",body:e,signal:this.getSignal()}).then((t=>t.json())).then((t=>{this.current_request==t.current_request&&(this.loading=!1,this.apply(t),this.wait(!1),delete requeststorage.active[this.hash])}))}getSignal(){return this.loading=new AbortController,this.loading.signal}getStateData(){const t={};return this.useState.forEach((e=>{const s=Array.isArray(e)?e[1]:e,r=state[s].getRequestData();0!=Object.keys(r).length&&(t[s]={data:r,source:e})})),t}apply(t){this.block=!0,"state"in t&&Object.keys(t.state).forEach((e=>{"data"in t.state[e]&&Object.keys(t.state[e].data).forEach((s=>{state[e].set(s,t.state[e].data[s])})),"runOnFrontend"in t.state[e]&&(console.log("runOnFrontend",t.state[e].runOnFrontend),t.state[e].runOnFrontend.forEach((t=>{widgetconvertor.toFunction(t)()})))})),"__rs"in t&&requeststorage.append(t.__rs),this.then&&window[this.then].bind(this)(t.result),this.catchControll(t),this.block=!1}error(t){this.catchControll(t)}setCatch(t){return this.catch=t,this}catchControll(t){"function"==typeof this.catch&&(this.catch(t),this.catch=!1)}wait(t){this.elementWaiting=t,this.bindToHtmlElement instanceof HTMLElement&&(t?(this.bindToHtmlElement.classList.add("waiting"),this.bindToHtmlElement.disabled=!0):(this.bindToHtmlElement.classList.remove("waiting"),this.bindToHtmlElement.disabled=!1))}}},"./src/state.js":(t,e,s)=>{s.r(e),s.d(e,{state:()=>n});var r=s("./src/state/widgetstate.js"),i=s("./src/state/widgetstate__static.js"),o=s("./src/state/widgetstate__tools.js"),a=s("./src/statemethod/statemethod.js");const n=new Proxy({path:[r.widgetstate.start]},{get(t,e){const s="_"==e.substring(0,1),n=s?e.slice(1):e;if(i.widgetstate__static.smart_methods.includes(e))return i.widgetstate__static[e](t.path);if(n in o.widgetstate__tools.tools)return s||o.widgetstate__tools.tools[n]?(...e)=>new a.statemethod(t.path,n,e,s):new r.widgetstate(t.path).run_method(n);if("function"==typeof r.widgetstate[e])return r.widgetstate[e];const c=[...t.path];return""!=e&&c.push(e),new Proxy({path:c},this)},set:(t,e,s)=>{const i=new r.widgetstate(t.path);if(""==e&&"object"==typeof s)for(const[t,e]of Object.entries(s))i.set(t,e);else i.set(e,s);return!0}})},"./src/state/widgetstate.js":(t,e,s)=>{s.r(e),s.d(e,{widgetstate:()=>o});var r=s("./src/state/widgetstate__tools.js"),i=s("./src/state/widgetstate__props.js");class o extends r.widgetstate__tools{static global={};static start="#";static splitter="/";constructor(t){super(),this._path=o.path_from_args(t),this._data=this.getdata(),this.props=i.widgetstate__props.by(this._path),this.activerequest=!1,this.bind=!1}static name(){return new o(Array.from(arguments))}static use(t,e,s=!1){state[t]=e;const r=o.path_from_args(t);if(s)for(const[t,e]of Object.entries(s))try{i.widgetstate__props["set"+t](r,e)}catch(e){console.error("Неизвестный метод widgetstate__props.set"+t)}}}},"./src/state/widgetstate__methods.js":(t,e,s)=>{s.r(e),s.d(e,{widgetstate__methods:()=>r});class r{static getFromElement(t){let{method:e,args:s,stateName:r}=t.props;const i="_"==e.substr(0,1);i&&(e=e.substr(1));const o=function(){return state[r].method(e).apply(this,s)};return i?o:o()}}},"./src/state/widgetstate__props.js":(t,e,s)=>{s.r(e),s.d(e,{widgetstate__props:()=>r});class r{static props={};static setdefault(t,e){r.setStateProp(t,"defaults",e)}static setalias(t,e){r.setStateProp(t,"alias",e)}static setonchange(t,e){r.setStateProp(t,"onchange",e)}static setdelay(t,e){r.setStateProp(t,"delay",e)}static setStateProp(t,e,s){t in r.props||(r.props[t]={}),r.props[t][e]=s}static by(t){return t in r.props&&r.props[t]}static getdefault(t,e){return r.issetPropName("defaults",t,e)&&"defaults"in r.props[t]&&e in r.props[t].defaults?r.props[t].defaults[e]:!!e.startsWith("_")&&[]}static issetPropName(t,e,s){return e in r.props&&t in r.props[e]&&s in r.props[e][t]}}},"./src/state/widgetstate__static.js":(t,e,s)=>{s.r(e),s.d(e,{widgetstate__static:()=>i});var r=s("./src/state/widgetstate.js");class i{static smart_methods=["val"];static val(t){const e=t.pop(),s=r.widgetstate.by(t);return e in s&&s[e]}static set(t,e){const s=t.pop();r.widgetstate.by(t)[s]=e}static path_from_args(){let t="";return t=Array.isArray(arguments[0])?r.widgetstate.path_from_args(...arguments[0]):Array.from(arguments).join(r.widgetstate.splitter),t.startsWith(r.widgetstate.start)?t:r.widgetstate.path_from_args(r.widgetstate.start,t)}run_method(t){return function(){return this[t].apply(this,arguments)}.bind(this)}static by(t){const e=Array.isArray(t)?t.join(r.widgetstate.splitter):t;return e in r.widgetstate.global?r.widgetstate.global[e]:{}}path(){return this._path}getdata(){return this._path in r.widgetstate.global||(r.widgetstate.global[this._path]={}),r.widgetstate.global[this._path]}}},"./src/state/widgetstate__tools.js":(t,e,s)=>{s.r(e),s.d(e,{widgetstate__tools:()=>l});var r=s("./src/state/widgetstate__static.js"),i=s("./src/watcher/widgetwatcher__links.js"),o=s("./src/watcher/widgetwatcher.js"),a=s("./src/convertor/widgetconvertor.js"),n=s("./src/request/requeststorage.js"),c=s("./src/state/widgetstate__props.js"),d=s("./src/request/widgetalias.js");class l extends r.widgetstate__static{static tools={method:!1,to:!1,get:!1,getdefault:!1,set:!1,setdefault:!1,onepushto:!1,pushto:!1,lpushto:!1,mergeto:!1,pullfrom:!1,watch:!0,watchif:!0,watchin:!0,watchdefault:!0,watchcase:!0,watchincase:!0,model:!0,modelin:!0,modelif:!0,toggle:!1,map:!0,inc:!1,dec:!1,getRequestData:!1};constructor(){super(),this._data={}}method(t){return{apply:(e,s)=>{this.bind=e,s=a.widgetconvertor.toArray(s),n.requeststorage.setDelay(this.props.delay||!1);try{return this[t].apply(this,s)}catch(e){console.error(`method ${t}`,s," - ",e)}}}}isWrap(t,e=!1){return t.substr(0,e?2:1)==(e?"__":"_")}to(t){return state.name(this._path,t)}set(t,e){if("object"!=typeof e||this.isWrap(t)){let s=!1;this.isWrap(t,!0)&&(e=a.widgetconvertor.toJSONForState(this._path,t,e)),s=Array.isArray(e)?!a.widgetconvertor.arraysEqual(this._data[t],e):this._data[t]!=e,s&&(this._data[t]=e,i.widgetwatcher__links.update(this._path,t),this.props&&(this.updateAlias(t),this.change(t)))}else{let s=this.to(t);for(const[t,r]of Object.entries(e))s.set(t,r)}}get(t){if(t in this._data){let e=this._data[t];return this.isWrap(t,!0)&&(e=JSON.parse(e)),e}return!1}updateAlias(t){const e="alias"in this.props&&0!=this.props.alias&&t in this.props.alias&&this.props.alias[t];e&&(this.isdefault(t)?d.widgetalias.remove(e):d.widgetalias.set(e,this._data[t]))}change(t){const e="onchange"in this.props&&this.props.onchange;e&&(n.requeststorage.setDelay(this.props.delay||!1),a.widgetconvertor.toFunction(e).apply(this.bind,[]))}getdefault(t){return c.widgetstate__props.getdefault(this._path,t)}setdefault(t){const e=this.getdefault(t);this.set(t,e)}isdefault(t){const e=this.getdefault(t),s=this.get(t);return Array.isArray(e)||Array.isArray(s)?a.widgetconvertor.arraysEqual(e,s):e==s}toggle(t,e=!0,s=!1){const r=this.get(t);let i=!1;t.startsWith("_")?(i=0==r?[]:[...r],i.includes(e)?i=i.filter((t=>t!=e)):i.push(e)):i=r==e?s:e,this.set(t,i)}inc(t,e=1){const s=parseInt(this.get(t));this.set(t,s+e)}dec(t,e=1){const s=parseInt(this.get(t));this.set(t,s-e)}onepushto(t,e){let s=this.get(t);if(Array.isArray(s)||(this.isWrap(t)?s=[]:console.error("#pushto",t,"is not Array")),!s.includes(e)){const r=[...s];r.push(e),this.set(t,r)}}pushto(t,e){let s=this.get(t);Array.isArray(s)||(this.isWrap(t)?s=[]:console.error("#pushto",t,"is not Array"));const r=[...s];r.push(e),this.set(t,r)}lpushto(t,e){let s=this.get(t);Array.isArray(s)||(this.isWrap(t)?s=[]:console.error("#lpushto",t,"is not Array"));const r=[e,...s];this.set(t,r)}mergeto(t,e){let s=this.get(t);Array.isArray(s)||(t.startsWith("_")?s=[]:console.error("#pushto",t,"is not Array"));const r=[...s,...e];this.set(t,r)}pullfrom(t,e){let s=this.get(t);Array.isArray(s)||(this.isWrap(t)?s=[]:console.error("#pullfrom",to,"is not Array"));const r=s.filter((t=>e!=t));this.set(t,r)}watch(t,e=!1){return new o.widgetwatcher(this._path,t,e)}watchif(t,e,s,r=!1){let i=!1;return Array.isArray(t)&&(i=t.slice(1),t=t[0]),this.watch(t,(function(t){return 0==i?t==e?s:r:t[i[0]]==e?s:r}))}watchin(t,e,s,r=!1){return this.watch(t,(function(t){return Array.isArray(t)&&t.includes(e)?s:r}))}watchdefault(t,e,s){return this.watch(t,(e=>{let s=!1;const r=this.getdefault(t);Array.isArray(e)?(s=a.widgetconvertor.arraysEqual(e,r),console.log("check array eq: ",e,r,"==",s)):s=e==r}))}watchcase(t,e){return this.watch(t,(t=>"object"==typeof e&&t in e&&e[t]))}watchincase(t,e,{all:s,some:r,none:i}){return t.startsWith("_")?this.watch(t,(t=>{if(Array.isArray(t)&&0!=t.length){let o=!0,a=!1;for(const s of e)if(t.includes(s)){if(a=!0,!o)return r}else if(o=!1,a)return r;return a?s:i}return i})):(console.error(t," (watchincase) должен иметь тип array (_)"),!1)}model(t,e="oninput"){return this.watch(t).setonlink(((s,r)=>{const i=this;s.assignProp(e,(function(){i.set(t,this[r])}))}))}modelin(t,e){return this.isWrap(t)?this.watch(t,(function(t){return Array.isArray(t)&&t.includes(e)})).setonlink((s=>{const r=this;s.assignProp("onchange",(function(){this.checked?r.pushto(t,e):r.pullfrom(t,e)}))})):(console.error(t," (modelin) должен иметь тип array (_)"),!1)}modelif(t,e,s,r=!1){return this.watch(t,(function(t){const s=t===e;return r?!s:s})).setonlink((i=>{const o=this;i.assignProp("onchange",(function(){this.checked?o.set(t,r?s:e):o.set(t,r?e:s)}))}))}map(t,e=!1){return e=a.widgetconvertor.toWidget(e),this.watch(t,(t=>!!Array.isArray(t)&&t.map((t=>a.widgetconvertor.copy(e.setTemplateData(t))))))}getRequestData(){const t={};return Object.keys(this._data).forEach((e=>{this.isWrap(e,!0)||(t[e]=this._data[e])})),t}}},"./src/statemethod/statemethod.js":(t,e,s)=>{s.r(e),s.d(e,{statemethod:()=>i});var r=s("./src/state/widgetstate.js");class i{static canBindMethod(t){return["watch","watchif","watchin","watchdefault","model","watchin"].includes(t)}constructor(t,e,s,r=!1){this.path=t,this.method=e,this.props=s,this.wrapFunc=r}apply(){const t=()=>new r.widgetstate(this.path).run_method(this.method)(...this.props);return this.wrapFunc?t:t()}link(t){this.apply().link(t)}toJSON(){return{element:"StateMethod2",props:{path:this.path,method:this.method,props:this.props,wrapFunc:this.wrapFunc}}}}},"./src/tools/widget__tools.js":(t,e,s)=>{s.r(e),s.d(e,{widget__tools:()=>a});var r=s("./src/tools/widgetcontentcontroller.js"),i=s("./src/state.js"),o=s("./src/convertor/widgetconvertor.js");class a extends r.widgetcontentcontroller{static current_id=0;element="div";childs=[];watchlist=[];watcher={};parent=!1;templateData=!1;eventControllList={};constructor(){super(),this.id=a.next_id(),this.state=i.state["--system--"]["element_"+this.id],this.layout=new Proxy({},{get:(t,e)=>this.__get(e),set:(t,e,s)=>(this.__set(e,s),!0)}),this.jsonSerializePath=!1,this.jsonSerializeKey=!1}static next_id(){return++a.current_id}checkDomElement(){return"HTML"!=o.widgetconvertor.getType(this.domElement)&&(this.domElement=window.document.createElement(this.element),this.domElement.setAttribute("key_id",this.id)),this}mix_props(t){const e=Object.keys(this.props);return Object.keys(t.props).forEach((t=>{t in this.props||e.push(t)})),e}delete(){this.domElement&&this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),this.domElement=null,this.watchlist_clear(),this.childs=[]}watchlist_push(t){this.watchlist.push(t),this.parent&&this.parent.watchlist_push(t)}watchlist_clear(){this.watchlist.forEach((t=>{widgetwatcher.removeFromGlobal(t[0],t[1])}))}replace_on(t){t.checkDomElement(),this.domElement.parentElement.replaceChild(t.domElement,this.domElement),this.delete(),t.render()}set_props_from_widget(t){const e=this.mix_props(t);for(const s of e){const e=s in this.props?this.props[s]:"";let r="";s in t.props&&(r=t.props[s]),e!=r&&(this.assignProp(s,r),this.props[s]=r)}}}},"./src/tools/widget_smartprops.js":(t,e,s)=>{s.r(e),s.d(e,{widget_smartprops:()=>o});var r=s("./src/ancor/widgetancor.js"),i=s("./src/convertor/widgetconvertor.js");class o{static dragboard(t,e){let s=!1,r=[];const o=[],a=e.boxsizing?e.boxsizing.x?e.boxsizing.x:e.boxsizing:0,n=(e.boxsizing&&(e.boxsizing.y?e.boxsizing.y:e.boxsizing),e.width),c=e.height;function d(){return[e.state.get("range_min"),e.state.get("range_max")]}t.domElement.style.position="relative",t.domElement.style.userSelect="none",t.domElement.style.width=n+a+"px",t.domElement.style.height=e.height+"px",t.domElement.innerHTML="","childs"in e&&i.widgetconvertor.toArray(e.childs).forEach((e=>{i.widgetconvertor.toWidget(e).setRootElement(t.domElement,t)}));let l=!1,h={x:{min:0,max:e.width},y:{min:0,max:e.height}};e.useSlide&&e.state.watch(["slide_min_start","slide_min_finish","slide_max_start","slide_max_finish"]).link((function(t,s,r,o){"rangeMin"==t&&(t=e.state.get("range_min")),"rangeMax"==o&&(o=e.state.get("range_max")),h=[{x:{min:i.widgetconvertor.map(t,d(),[0,e.width]),max:i.widgetconvertor.map(s,d(),[0,e.width])}},{x:{min:i.widgetconvertor.map(r,d(),[0,e.width]),max:i.widgetconvertor.map(o,d(),[0,e.width])}}]}));let _=[];"Object"===i.widgetconvertor.getType(e.drag)?(_=Object.values(e.drag),l=Object.keys(e.drag)):_=e.drag,_=i.widgetconvertor.toArray(_),_.forEach(((a,h)=>{if((a=i.widgetconvertor.toWidget(a)).setRootElement(t.domElement,t),a.style("position","absolute"),l)if("state"in e)e.state.watch([l[h],"range_"+l[h]]).link((function(t){if(!1===s){const s=i.widgetconvertor.map(t[0],d(),[0,e.width]);a.style("left",s+"px")}}));else{const[t,s]=function(t){let s=0,r=0;const o="axis"in e&&e.axis;return"y"!=o&&(s=t),"x"!=o&&(r=t),s=i.widgetconvertor.map(s,d(),[0,n]),r=i.widgetconvertor.map(r,d(),[0,c]),[s,r]}(l[h]);a.assignProp("style",`position: absolute; left: ${t}px; top: ${s}px`)}else a.assignProp("style","position: absolute; left: 0px; top: 0px");a.assignProp("onmousedown",(t=>{r=[t.screenX,t.screenY],s=h})),o.push(a)})),t.domElement.onmousemove=t=>{!1!==s&&(!function(t,r){let a,d=0;const l=Array.isArray(h)?h[s]:h,_="axis"in e&&e.axis;if("y"!=_&&(a=(parseInt(o[s].domElement.style.left)||0)+t,a>l.x.max&&(a=l.x.max),a<l.x.min&&(a=l.x.min),o[s].style("left",a+"px")),"x"!=_&&(d=(parseInt(o[s].domElement.style.top)||0)+r,d>l.y.max&&(d=l.y.max),d<l.y.min&&(d=l.y.min),o[s].style("top",d+"px")),"function"==typeof e.ondrag){let t=a,r=d;t=i.widgetconvertor.map(a,[0,n],[0,100]),r=i.widgetconvertor.map(d,[0,c],[0,100]),e.ondrag(s,t,r,a,d)}}(t.screenX-r[0],t.screenY-r[1]),r=[t.screenX,t.screenY])},t.domElement.onmouseup=()=>{s=!1},t.domElement.onmouseleave=()=>{s=!1}}static ancor(t,e){return r.widgetancor.create(e,t),!1}}},"./src/tools/widgetcontentcontroller.js":(t,e,s)=>{s.r(e),s.d(e,{widgetcontentcontroller:()=>r});class r{removeProps(t){t.forEach((t=>{t in this.props&&delete this.props[t],"child"==t&&(this.childs=[])}))}checkWatchers(t,e){if(t in this.watcher){if(this.watcher[t]===e)return!1;this.watcher[t]=e}else this.props[t]=e;return!0}checkContentProp(t,e,s){return"child"==t?this.checkChilds(e,s):["innerText","innerHTML"].includes(t)?this.checkText(e,t,s):t in this.watcher?[!1,this.watcher[t]!=s]:[!1,!0]}checkChilds(t,e){let s=!1,r=!0;switch(t){case"String":case"Int":case"Bool":s="innerText","child"in this.watcher&&(this.clearWatcherFrom(this.childs),this.childs=[],this.watcher.innerText=this.watcher.child,delete this.watcher.child),this.props.innerText=e,delete this.props.child,this.childs=[];break;default:this.removeProps(["innerText","innerHTML"]),r=this.checkWatchers("child",e)}return[s,r]}checkText(t,e,s){let r=!1,i=!0;switch(t){case"Array":case"Widget":case"Element":this.watcher.child=this.watcher[e],delete this.watcher[e],r="child",this.sequreAssign("innerText",""),this.childs=[],delete this.props[e],this.props.child=s;break;default:switch(e){case"innerText":this.removeProps(["innerHTML","child"]);break;case"innerHTML":this.removeProps(["innerText","child"])}i=this.checkWatchers(e,s)}return[r,i]}}},"./src/watcher/widgetwatcher.js":(t,e,s)=>{s.r(e),s.d(e,{widgetwatcher:()=>a});var r=s("./src/watcher/widgetwatcher__update.js"),i=s("./src/watcher/widgetwatcher__tools.js"),o=s("./src/watcher/widgetwatcher__links.js");class a extends r.widgetwatcher__update{static global=[];constructor(t,e,s=!1){super(),this.path=t;const r=i.widgetwatcher__tools.parsekeys(e,s);this.keys=r.keys,this.callback=r.callback?r.callback:this.tempcallback,this.keys.forEach((t=>{o.widgetwatcher__links.add(this.path,t,this)})),this.to=!1,this.props=!1,this.view=!1,this.onlink=!1,a.global.push(this),this.id=a.global.length}tempcallback(){return 1==arguments.length?arguments[0]:arguments}link(t,e=!1){return this.to=t,this.props=e,this.onlink&&this.onlink(this.to,this.props),this.update(),[this.path,this.id]}setonlink(t){return this.onlink=t,this}toJSON(){return{widgetwatcher:"HELLO!"}}}},"./src/watcher/widgetwatcher__links.js":(t,e,s)=>{s.r(e),s.d(e,{widgetwatcher__links:()=>r});class r{static global={};static add(t,e,s){t in r.global||(r.global[t]={}),e in r.global[t]||(r.global[t][e]=[]),r.global[t][e].push(s)}static update(t,e){return t in r.global&&e in r.global[t]&&void r.global[t][e].forEach((t=>{t.update()}))}}},"./src/watcher/widgetwatcher__tools.js":(t,e,s)=>{s.r(e),s.d(e,{widgetwatcher__tools:()=>r});class r{static parsekeys(t,e=!1){if("function"==typeof t){e=t;const[s,r]=/\(?(.{0,}?)[\)|=]/m.exec(t.toString());t=r.split(",").map((t=>t.trim()))}else"string"==typeof t&&(t=t.split(",").map((t=>t.trim())));let s=t.join(",");return{keys:t,callback:e,strkeys:s}}}},"./src/watcher/widgetwatcher__update.js":(t,e,s)=>{s.r(e),s.d(e,{widgetwatcher__update:()=>o});var r=s("./src/state/widgetstate.js"),i=s("./src/convertor/widgetconvertor.js");class o{is_func(){return"function"==typeof this.to}get_value(t=!1){const e=new r.widgetstate(this.path),s=[];return this.keys.forEach((t=>{s.push(e.get(t))})),i.widgetconvertor.toFunction(this.callback).apply(t,s)}update(){const t=this.is_func(),e=this.get_value(!t&&this.to);t?this.update_callback(e):this.update_widget(e)}update_callback(t){this.to(t)}update_widget(t){if(this.to){const e=this.to.assignProp(this.props,t);e&&(this.props=e)}}}},"./src/widget.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{widget:()=>widget});var _tools_widget_tools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/tools/widget__tools.js"),_tools_widget_smartprops__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/tools/widget_smartprops.js"),_convertor_widgetconvertor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/convertor/widgetconvertor.js"),_element_widgetelement__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/element/widgetelement.js"),_widgetdom_widgetdom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/widgetdom/widgetdom.js"),_state_widgetstate_methods__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/state/widgetstate__methods.js");class widget extends _tools_widget_tools__WEBPACK_IMPORTED_MODULE_0__.widget__tools{constructor(t="div",e={},s=!1){super(),this.element=t,this.props=e}__get(t){}__set(t,e){"child"==t?("child"in this.props||(this.props.child=[]),this.props.child.push(e)):this.props[t]=e}setRootElement(t,e=!1){return this.rootElement=t,this.checkDomElement(),this.rootElement.appendChild(this.domElement),this.parent=e,this.render(),this}render(){for(const[t,e]of Object.entries(this.props))this.assignProp(t,e);return this}updateChilds(t){t=_convertor_widgetconvertor__WEBPACK_IMPORTED_MODULE_2__.widgetconvertor.toArray(t);const e=[],s=Math.max(this.childs.length,t.length);for(let r=0;r<s;r++)if(this.childs[r]){const s=_widgetdom_widgetdom__WEBPACK_IMPORTED_MODULE_4__.widgetdom.update(this.childs[r],t[r]);switch(s[0]){case"delete":e.push(r);break;case"replace":this.childs[r]=s[1]}}else{const e=_convertor_widgetconvertor__WEBPACK_IMPORTED_MODULE_2__.widgetconvertor.toWidget(t[r]);e.setRootElement(this.domElement,this),this.childs[r]=e}if(e.length>0){const t=this.childs.filter(((t,s)=>!e.includes(s)));this.childs=t}return this}setTemplateData(t){return this.templateData=t,this}templateFillContents(template){const regex=/\$\{(\w+)\}/gm;template=template.replace(regex,'${tval("$1")}'),current_template_data.data=this.templateData;let val="";return eval(`val = \`${template}\``),val}assignProp(t,e){if(t in _tools_widget_smartprops__WEBPACK_IMPORTED_MODULE_1__.widget_smartprops&&"function"==typeof _tools_widget_smartprops__WEBPACK_IMPORTED_MODULE_1__.widget_smartprops[t])return _tools_widget_smartprops__WEBPACK_IMPORTED_MODULE_1__.widget_smartprops[t](this,e);let s=_convertor_widgetconvertor__WEBPACK_IMPORTED_MODULE_2__.widgetconvertor.getType(e),r=!1;switch(s){case"Watcher":return e.link(this,t),r;case"String":this.templateData&&(e=this.templateFillContents(e));break;case"StateMethod2":e=e.apply();break;case"StateMethod":e=_state_widgetstate_methods__WEBPACK_IMPORTED_MODULE_5__.widgetstate__methods.getFromElement(e);break;case"Element":e=_element_widgetelement__WEBPACK_IMPORTED_MODULE_3__.widgetelement.make(e);break;case"Array":"on"==t.substr(0,2)&&(e=_convertor_widgetconvertor__WEBPACK_IMPORTED_MODULE_2__.widgetconvertor.toFunction(e));break;case"Function":if(["innerText","innerHTML","child"].includes(t))return this.assignProp(t,e())}if(_convertor_widgetconvertor__WEBPACK_IMPORTED_MODULE_2__.widgetconvertor.getType(e)!=s)return t in this.watcher||(this.props[t]=e),this.assignProp(t,e);const[i,o]=this.checkContentProp(t,s,e);return i&&(t=i,r=i),o&&("child"==t?this.updateChilds(e):this.sequreAssign(t,e,s)),r}sequreAssign(t,e,s=!1){0==s&&(s=_convertor_widgetconvertor__WEBPACK_IMPORTED_MODULE_2__.widgetconvertor.getType(e));const r="_"==t.substr(0,1);switch(r&&(t=t.substr(1)),s){case"Bool":["innerHTML","innerText","value"].includes(t)?this.domElement[t]="":this.domElement[t]=e;break;case"String":case"Int":["for"].includes(t)?this.domElement.setAttribute(t,e):this.domElement[t]=e;break;case"HTML":"innerHTML"==t||"innerText"==t?this.domElement.appendChild(e):console.info("не знаю как применить в",t," ->",e);break;case"Function":if("on"==t.substr(0,2)){const s=function(t){return(!r||t.target==this)&&e.apply(this,[t])};this.on(t.substr(2),s)}else this.domElement[t]=e();break;case"Array":console.info("ARRAY",`${t} (${s})`,e);break;default:console.info("Не применено - ","prop: ",t,"value: ",e,"type: ",s)}}on(t,e,s=""){const r=t+s;r in this.eventControllList||(this.eventControllList[r]=e,this.domElement.addEventListener(t,e))}style(t,e){this.domElement&&(this.domElement.style[t]=e)}styles(t){for(const[e,s]of Object.entries(t))this.style(e,s)}clearWatcherFrom(t){t.forEach((t=>{t.watchlist.forEach((t=>{})),this.clearWatcherFrom(t.childs)}))}setPropsForJsonSerializeFunctions(t,e){this.jsonSerializePath=t,this.jsonSerializeKey=e}toJSON(){const t={};return Object.keys(this.props).forEach((e=>{"function"==typeof this.props[e]?t[e]=new widgetcallback(this.props[e],`element_${this.id}`):t[e]=this.props[e]})),{element:this.element,props:t}}}},"./src/widgetdom/widgetdom.js":(t,e,s)=>{s.r(e),s.d(e,{widgetdom:()=>o});var r=s("./src/widgetdom/widgetdom__tools.js"),i=s("./src/convertor/widgetconvertor.js");class o extends r.widgetdom__tools{static _debug=!0;static _trace=!0;static debug(t,e){return function(){o._debug&&(console.group(arguments),console.info(`class: %c${t} %cmethod:%c ${e} `,"color: #c00","color: #fff","color: #cc0"),o._trace&&console.trace(),console.groupEnd())}}static update(t,e){return e?(e=i.widgetconvertor.toWidget(e),o.changedType(t,e)?(t.replace_on(e),["replace",e]):(t.set_props_from_widget(e),["change"])):(t.delete(),["delete"])}static changedType(t,e){return t.element!=e.element||t.constructor.name!=e.constructor.name}}},"./src/widgetdom/widgetdom__api.js":(t,e,s)=>{s.r(e),s.d(e,{widgetdom__api:()=>i});var r=s("./src/convertor/widgetconvertor.js");class i{static ancor(t,e=!1){const s=widgetancor.get(t);return e?e(s):s}static app(t){i.render("#app",t)}static active={};static render(t,e,s="rebuild"){if(e=r.widgetconvertor.toWidget(e),t in i.active){const r=i.active[t];switch(s){case"rebuild":const s=i.update(r,e);switch(s[0]){case"delete":delete i.active[t];break;case"replace":i.active[t]=s[1]}break;case"append":r.child=e,r.render()}}else i.querySelector(t,s).then((s=>{i.firstRender(s,t,e)}))}static querySelector(t,e="rebuild"){return new Promise((function(s,r){const o=window.document.querySelector(t);if(o)switch(e){case"rebuild":s(o);break;case"append":const t=document.createElement("div");o.appendChild(t),s(t)}else window.addEventListener("load",(()=>{const o=i.querySelector(t,e);o?s(o):r("Элемента нет "+t)}))}))}static firstRender(t,e,s){t.innerHTML="",s.setRootElement(t),i.active[e]=s}static widgetStore={};static widgetRegister(t,e){i.widgetStore[t]=e}static isReg(t){return t in i.widgetStore}static get(t,e){return i.widgetStore[t](e)}}},"./src/widgetdom/widgetdom__tools.js":(t,e,s)=>{s.r(e),s.d(e,{widgetdom__tools:()=>o});var r=s("./src/widgetdom/widgetdom__api.js"),i=s("./src/widgetdom/widgetdom.js");class o extends r.widgetdom__api{static defaulttag="div";static getDefaultTag(t=!1){return t||i.widgetdom.defaulttag}static singleElement={area:!1,base:!1,br:!1,col:!1,embed:!1,hr:!1,img:"src",input:"value",textarea:"value",link:"href",menuitem:!1,meta:!1,param:!1,source:!1,track:!1,wbr:!1};static getPropForDefaultValue(t,e){const s=e in i.widgetdom.singleElement&&i.widgetdom.singleElement[e];return s?{[s]:t}:{innerText:t}}}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var s=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](s,s.exports,__webpack_require__),s.exports}__webpack_require__.d=(t,e)=>{for(var s in e)__webpack_require__.o(e,s)&&!__webpack_require__.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{__webpack_require__.r(__webpack_exports__);var t=__webpack_require__("./CyberScript.js");for(const e of Object.keys(t.mods))window[e]=t.mods[e]})()})();
//# sourceMappingURL=cs.min.js.map